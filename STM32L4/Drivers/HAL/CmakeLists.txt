file(GLOB HAL_SOURCES
    ${CMAKE_CURRENT_SOURCE_DIR}/Src/*.c
)

add_library(hal STATIC
    ${HAL_SOURCES}
    ${CMAKE_CURRENT_SOURCE_DIR}/Src/Legacy/stm32l4xx_hal_can.c
)

target_include_directories(hal
    PUBLIC
        ${CMAKE_CURRENT_SOURCE_DIR}/Inc
        ${CMAKE_CURRENT_SOURCE_DIR}/Inc/Legacy
        ${CMAKE_SOURCE_DIR}/Drivers/Device/Include
        ${CMAKE_SOURCE_DIR}/Drivers/CMSIS/Include
    PRIVATE
        ${CMAKE_SOURCE_DIR}/Core/Inc
)

target_compile_definitions(hal PRIVATE
    STM32L432xx
    USE_HAL_DRIVER
)